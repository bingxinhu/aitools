{"remainingRequest":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/babel-loader/lib/index.js!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/utils/zipdownload.js","dependencies":[{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/utils/zipdownload.js","mtime":1669257735079},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/babel.config.js","mtime":1669257735055},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1670489673015},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1670489675467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CnZhciBtaW1lTWFwID0gewogIHhsc3g6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsCiAgemlwOiAnYXBwbGljYXRpb24vemlwJwp9Owp2YXIgYmFzZVVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEk7CmV4cG9ydCBmdW5jdGlvbiBkb3duTG9hZFppcChzdHIsIGZpbGVuYW1lKSB7CiAgdmFyIHVybCA9IGJhc2VVcmwgKyBzdHI7CiAgYXhpb3MoewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogdXJsLAogICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICBoZWFkZXJzOiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0VG9rZW4oKQogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmVzb2x2ZUJsb2IocmVzLCBtaW1lTWFwLnppcCk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRvd25Mb2FkRmlsZShzdHIpIHsKICB2YXIgdXJsID0gYmFzZVVybCArIHN0cjsKICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgYUxpbmsuaHJlZiA9IHVybDsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKICBhTGluay5jbGljaygpOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwp9Ci8qKgogKiDop6PmnpBibG9i5ZON5bqU5YaF5a655bm25LiL6L29CiAqIEBwYXJhbSB7Kn0gcmVzIGJsb2Llk43lupTlhoXlrrkKICogQHBhcmFtIHtTdHJpbmd9IG1pbWVUeXBlIE1JTUXnsbvlnosKICovCmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQmxvYihyZXMsIG1pbWVUeXBlKSB7CiAgdmFyIGFMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSwgewogICAgdHlwZTogbWltZVR5cGUKICB9KTsKICAvLyAvL+S7jnJlc3BvbnNl55qEaGVhZGVyc+S4reiOt+WPlmZpbGVuYW1lLCDlkI7nq69yZXNwb25zZS5zZXRIZWFkZXIoIkNvbnRlbnQtZGlzcG9zaXRpb24iLCAiYXR0YWNobWVudDsgZmlsZW5hbWU9eHh4eC5kb2N4Iikg6K6+572u55qE5paH5Lu25ZCNOwogIHZhciBwYXR0ID0gbmV3IFJlZ0V4cCgnZmlsZW5hbWU9KFteO10rXFwuW15cXC47XSspOyonKTsKICB2YXIgY29udGVudERpc3Bvc2l0aW9uID0gZGVjb2RlVVJJKHJlcy5oZWFkZXJzWydjb250ZW50LWRpc3Bvc2l0aW9uJ10pOwogIHZhciByZXN1bHQgPSBwYXR0LmV4ZWMoY29udGVudERpc3Bvc2l0aW9uKTsKICB2YXIgZmlsZU5hbWUgPSByZXN1bHRbMV07CiAgZmlsZU5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cIi9nLCAnJyk7CiAgYUxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgYUxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVOYW1lKTsgLy8g6K6+572u5LiL6L295paH5Lu25ZCN56ewCiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhTGluayk7CiAgYUxpbmsuY2xpY2soKTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKfQ=="},{"version":3,"names":["axios","getToken","mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","method","responseType","headers","then","res","resolveBlob","downLoadFile","aLink","document","createElement","href","body","appendChild","click","mimeType","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","URL","createObjectURL","setAttribute"],"sources":["/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/utils/zipdownload.js"],"sourcesContent":["import axios from 'axios'\nimport { getToken } from '@/utils/auth'\n\nconst mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n}\n\nconst baseUrl = process.env.VUE_APP_BASE_API\nexport function downLoadZip(str, filename) {\n  var url = baseUrl + str\n  axios({\n    method: 'get',\n    url: url,\n    responseType: 'blob',\n    headers: { 'Authorization': 'Bearer ' + getToken() }\n  }).then(res => {\n    resolveBlob(res, mimeMap.zip)\n  })\n}\n\nexport function downLoadFile(str) {\n  var url = baseUrl + str\n  const aLink = document.createElement('a')\n  aLink.href = url\n  document.body.appendChild(aLink)\n  aLink.click()\n  document.body.appendChild(aLink)\n}\n/**\n * 解析blob响应内容并下载\n * @param {*} res blob响应内容\n * @param {String} mimeType MIME类型\n */\nexport function resolveBlob(res, mimeType) {\n  const aLink = document.createElement('a')\n  var blob = new Blob([res.data], { type: mimeType })\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\n  var result = patt.exec(contentDisposition)\n  var fileName = result[1]\n  fileName = fileName.replace(/\\\"/g, '')\n  aLink.href = URL.createObjectURL(blob)\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\n  document.body.appendChild(aLink)\n  aLink.click()\n  document.body.appendChild(aLink)\n}\n"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,cAAc;AAEvC,IAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,mEAAmE;EACzEC,GAAG,EAAE;AACP,CAAC;AAED,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB;AAC5C,OAAO,SAASC,WAAW,CAACC,GAAG,EAAEC,QAAQ,EAAE;EACzC,IAAIC,GAAG,GAAGP,OAAO,GAAGK,GAAG;EACvBV,KAAK,CAAC;IACJa,MAAM,EAAE,KAAK;IACbD,GAAG,EAAEA,GAAG;IACRE,YAAY,EAAE,MAAM;IACpBC,OAAO,EAAE;MAAE,eAAe,EAAE,SAAS,GAAGd,QAAQ;IAAG;EACrD,CAAC,CAAC,CAACe,IAAI,CAAC,UAAAC,GAAG,EAAI;IACbC,WAAW,CAACD,GAAG,EAAEf,OAAO,CAACE,GAAG,CAAC;EAC/B,CAAC,CAAC;AACJ;AAEA,OAAO,SAASe,YAAY,CAACT,GAAG,EAAE;EAChC,IAAIE,GAAG,GAAGP,OAAO,GAAGK,GAAG;EACvB,IAAMU,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACzCF,KAAK,CAACG,IAAI,GAAGX,GAAG;EAChBS,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;EAChCA,KAAK,CAACM,KAAK,EAAE;EACbL,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASF,WAAW,CAACD,GAAG,EAAEU,QAAQ,EAAE;EACzC,IAAMP,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACzC,IAAIM,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACZ,GAAG,CAACa,IAAI,CAAC,EAAE;IAAEC,IAAI,EAAEJ;EAAS,CAAC,CAAC;EACnD;EACA,IAAIK,IAAI,GAAG,IAAIC,MAAM,CAAC,+BAA+B,CAAC;EACtD,IAAIC,kBAAkB,GAAGC,SAAS,CAAClB,GAAG,CAACF,OAAO,CAAC,qBAAqB,CAAC,CAAC;EACtE,IAAIqB,MAAM,GAAGJ,IAAI,CAACK,IAAI,CAACH,kBAAkB,CAAC;EAC1C,IAAII,QAAQ,GAAGF,MAAM,CAAC,CAAC,CAAC;EACxBE,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACtCnB,KAAK,CAACG,IAAI,GAAGiB,GAAG,CAACC,eAAe,CAACb,IAAI,CAAC;EACtCR,KAAK,CAACsB,YAAY,CAAC,UAAU,EAAEJ,QAAQ,CAAC,EAAC;EACzCjB,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;EAChCA,KAAK,CAACM,KAAK,EAAE;EACbL,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;AAClC"}]}