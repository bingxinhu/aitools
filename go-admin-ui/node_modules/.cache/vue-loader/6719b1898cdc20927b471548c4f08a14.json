{"remainingRequest":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/views/profile/resetPwd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/views/profile/resetPwd.vue","mtime":1669257735083},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1670489673015},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1670489672091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwZGF0ZVVzZXJQd2QgfSBmcm9tICdAL2FwaS9hZG1pbi9zeXMtdXNlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgY29uc3QgZXF1YWxUb1Bhc3N3b3JkID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodGhpcy51c2VyLm5ld1Bhc3N3b3JkICE9PSB2YWx1ZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh6L6T5YWl55qE5a+G56CB5LiN5LiA6Ie0JykpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICB0ZXN0OiAnMXRlc3QnLAogICAgICB1c2VyOiB7CiAgICAgICAgb2xkUGFzc3dvcmQ6IHVuZGVmaW5lZCwKICAgICAgICBuZXdQYXNzd29yZDogdW5kZWZpbmVkLAogICAgICAgIGNvbmZpcm1QYXNzd29yZDogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIG9sZFBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5pen5a+G56CB5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIG5ld1Bhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5paw5a+G56CB5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogNiwgbWF4OiAyMCwgbWVzc2FnZTogJ+mVv+W6puWcqCA2IOWIsCAyMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgY29uZmlybVBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn56Gu6K6k5a+G56CB5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IGVxdWFsVG9QYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHVwZGF0ZVVzZXJQd2QodGhpcy51c2VyLm9sZFBhc3N3b3JkLCB0aGlzLnVzZXIubmV3UGFzc3dvcmQpLnRoZW4oCiAgICAgICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MocmVzcG9uc2UubXNnKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxWaWV3JywgdGhpcy4kcm91dGUpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9pbmRleCcgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["resetPwd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"resetPwd.vue","sourceRoot":"src/views/profile","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"user\" :rules=\"rules\" label-width=\"80px\">\n    <el-form-item label=\"旧密码\" prop=\"oldPassword\">\n      <el-input v-model=\"user.oldPassword\" placeholder=\"请输入旧密码\" type=\"password\" />\n    </el-form-item>\n    <el-form-item label=\"新密码\" prop=\"newPassword\">\n      <el-input v-model=\"user.newPassword\" placeholder=\"请输入新密码\" type=\"password\" />\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n      <el-input v-model=\"user.confirmPassword\" placeholder=\"请确认密码\" type=\"password\" />\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" size=\"mini\" @click=\"submit\">保存</el-button>\n      <el-button type=\"danger\" size=\"mini\" @click=\"close\">关闭</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { updateUserPwd } from '@/api/admin/sys-user'\n\nexport default {\n  data() {\n    const equalToPassword = (rule, value, callback) => {\n      if (this.user.newPassword !== value) {\n        callback(new Error('两次输入的密码不一致'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      test: '1test',\n      user: {\n        oldPassword: undefined,\n        newPassword: undefined,\n        confirmPassword: undefined\n      },\n      // 表单校验\n      rules: {\n        oldPassword: [\n          { required: true, message: '旧密码不能为空', trigger: 'blur' }\n        ],\n        newPassword: [\n          { required: true, message: '新密码不能为空', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '确认密码不能为空', trigger: 'blur' },\n          { required: true, validator: equalToPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    submit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          updateUserPwd(this.user.oldPassword, this.user.newPassword).then(\n            response => {\n              if (response.code === 200) {\n                this.msgSuccess(response.msg)\n              } else {\n                this.msgError(response.msg)\n              }\n            }\n          )\n        }\n      })\n    },\n    close() {\n      this.$store.dispatch('tagsView/delView', this.$route)\n      this.$router.push({ path: '/index' })\n    }\n  }\n}\n</script>\n"]}]}