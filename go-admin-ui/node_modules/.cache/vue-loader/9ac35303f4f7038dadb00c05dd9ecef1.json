{"remainingRequest":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/components/TopNav/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/components/TopNav/index.vue","mtime":1669257735071},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1670489673015},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1670489672091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmhtumDqOagj+WIneWni+aVsAogICAgICB2aXNpYmxlTnVtYmVyOiA1LAogICAgICAvLyDmmK/lkKbkuLrpppbmrKHliqDovb0KICAgICAgaXNGcmlzdDogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDpobbpg6jmmL7npLroj5zljZUKICAgIHRvcE1lbnVzKCkgewogICAgICByZXR1cm4gdGhpcy5yb3V0ZXJzLm1hcCgobWVudSkgPT4gKHsKICAgICAgICAuLi5tZW51LAogICAgICAgIGNoaWxkcmVuOiB1bmRlZmluZWQKICAgICAgfSkpCiAgICB9LAogICAgLy8g5omA5pyJ55qE6Lev55Sx5L+h5oGvCiAgICByb3V0ZXJzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucGVybWlzc2lvbi50b3BiYXJSb3V0ZXJzCiAgICB9LAogICAgLy8g6K6+572u5a2Q6Lev55SxCiAgICBjaGlsZHJlbk1lbnVzKCkgewogICAgICB2YXIgY2hpbGRyZW5NZW51cyA9IFtdCiAgICAgIHRoaXMucm91dGVycy5tYXAoKHJvdXRlcikgPT4gewogICAgICAgIGZvciAodmFyIGl0ZW0gaW4gcm91dGVyLmNoaWxkcmVuKSB7CiAgICAgICAgICBpZiAocm91dGVyLmNoaWxkcmVuW2l0ZW1dLnBhcmVudFBhdGggPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByb3V0ZXIuY2hpbGRyZW5baXRlbV0ucGFyZW50UGF0aCA9IHJvdXRlci5wYXRoCiAgICAgICAgICB9CiAgICAgICAgICBjaGlsZHJlbk1lbnVzLnB1c2gocm91dGVyLmNoaWxkcmVuW2l0ZW1dKQogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIGNvbnN0YW50Um91dGVzLmNvbmNhdChjaGlsZHJlbk1lbnVzKQogICAgfSwKICAgIC8vIOm7mOiupOa/gOa0u+eahOiPnOWNlQogICAgYWN0aXZlTWVudSgpIHsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGgKICAgICAgbGV0IGFjdGl2ZVBhdGggPSB0aGlzLnJvdXRlcnNbMF0ucGF0aAogICAgICBpZiAocGF0aC5sYXN0SW5kZXhPZignLycpID4gMCkgewogICAgICAgIGNvbnN0IHRtcFBhdGggPSBwYXRoLnN1YnN0cmluZygxLCBwYXRoLmxlbmd0aCkKICAgICAgICBhY3RpdmVQYXRoID0gJy8nICsgdG1wUGF0aC5zdWJzdHJpbmcoMCwgdG1wUGF0aC5pbmRleE9mKCcvJykpCiAgICAgIH0gZWxzZSBpZiAocGF0aCA9PT0gJy9pbmRleCcgfHwgcGF0aCA9PT0gJycpIHsKICAgICAgICBpZiAoIXRoaXMuaXNGcmlzdCkgewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcwogICAgICAgICAgdGhpcy5pc0ZyaXN0ID0gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhY3RpdmVQYXRoID0gJ2luZGV4JwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVJvdXRlcyhhY3RpdmVQYXRoKQogICAgICByZXR1cm4gYWN0aXZlUGF0aAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0VmlzaWJsZU51bWJlcigpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmoLnmja7lrr3luqborqHnrpforr7nva7mmL7npLrmoI/mlbAKICAgIHNldFZpc2libGVOdW1iZXIoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtIDIwMAogICAgICBjb25zdCBlbFdpZHRoID0gdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgKICAgICAgY29uc3QgbWVudUl0ZW1Ob2RlcyA9IHRoaXMuJGVsLmNoaWxkcmVuCiAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IEFycmF5LmZyb20obWVudUl0ZW1Ob2RlcykubWFwKAogICAgICAgIChpKSA9PiBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoCiAgICAgICkKICAgICAgdGhpcy52aXNpYmxlTnVtYmVyID0gKAogICAgICAgIHBhcnNlSW50KHdpZHRoIC0gZWxXaWR0aCkgLyBwYXJzZUludChtZW51V2lkdGgpCiAgICAgICkudG9GaXhlZCgwKQogICAgfSwKICAgIC8vIOiPnOWNlemAieaLqeS6i+S7tgogICAgaGFuZGxlU2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICBpZiAoa2V5LmluZGV4T2YoJ2h0dHA6Ly8nKSAhPT0gLTEgfHwga2V5LmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xKSB7CiAgICAgICAgLy8gaHR0cChzKTovLyDot6/lvoTmlrDnqpflj6PmiZPlvIAKICAgICAgICB3aW5kb3cub3BlbihrZXksICdfYmxhbmsnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWN0aXZlUm91dGVzKGtleSkKICAgICAgfQogICAgfSwKICAgIC8vIOW9k+WJjea/gOa0u+eahOi3r+eUsQogICAgYWN0aXZlUm91dGVzKGtleSkgewogICAgICB2YXIgcm91dGVzID0gW10KICAgICAgaWYgKHRoaXMuY2hpbGRyZW5NZW51cyAmJiB0aGlzLmNoaWxkcmVuTWVudXMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuY2hpbGRyZW5NZW51cy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgIGlmIChrZXkgPT09IGl0ZW0ucGFyZW50UGF0aCB8fCAoa2V5ID09PSAnaW5kZXgnICYmIGl0ZW0ucGF0aCA9PT0gJycpKSB7CiAgICAgICAgICAgIHJvdXRlcy5wdXNoKGl0ZW0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3Blcm1pc3Npb24vU0VUX1NJREVCQVJfUk9VVEVSUycsIHJvdXRlcykKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/TopNav","sourcesContent":["<template>\n  <el-menu\n    :default-active=\"activeMenu\"\n    mode=\"horizontal\"\n    @select=\"handleSelect\"\n  >\n    <template v-for=\"(item, index) in topMenus\">\n      <el-menu-item\n        v-if=\"index < visibleNumber\"\n        :key=\"index\"\n        :index=\"item.path\"\n      ><svg-icon :icon-class=\"item.meta.icon\" />\n        {{ item.meta.title }}</el-menu-item>\n    </template>\n\n    <!-- 顶部菜单超出数量折叠 -->\n    <el-submenu v-if=\"topMenus.length > visibleNumber\" index=\"more\">\n      <template slot=\"title\">更多菜单</template>\n      <template v-for=\"(item, index) in topMenus\">\n        <el-menu-item\n          v-if=\"index >= visibleNumber\"\n          :key=\"index\"\n          :index=\"item.path\"\n        ><svg-icon :icon-class=\"item.meta.icon\" />\n          {{ item.meta.title }}</el-menu-item>\n      </template>\n    </el-submenu>\n  </el-menu>\n</template>\n\n<script>\nimport { constantRoutes } from '@/router'\n\nexport default {\n  data() {\n    return {\n      // 顶部栏初始数\n      visibleNumber: 5,\n      // 是否为首次加载\n      isFrist: false\n    }\n  },\n  computed: {\n    // 顶部显示菜单\n    topMenus() {\n      return this.routers.map((menu) => ({\n        ...menu,\n        children: undefined\n      }))\n    },\n    // 所有的路由信息\n    routers() {\n      return this.$store.state.permission.topbarRouters\n    },\n    // 设置子路由\n    childrenMenus() {\n      var childrenMenus = []\n      this.routers.map((router) => {\n        for (var item in router.children) {\n          if (router.children[item].parentPath === undefined) {\n            router.children[item].parentPath = router.path\n          }\n          childrenMenus.push(router.children[item])\n        }\n      })\n      return constantRoutes.concat(childrenMenus)\n    },\n    // 默认激活的菜单\n    activeMenu() {\n      const path = this.$route.path\n      let activePath = this.routers[0].path\n      if (path.lastIndexOf('/') > 0) {\n        const tmpPath = path.substring(1, path.length)\n        activePath = '/' + tmpPath.substring(0, tmpPath.indexOf('/'))\n      } else if (path === '/index' || path === '') {\n        if (!this.isFrist) {\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n          this.isFrist = true\n        } else {\n          activePath = 'index'\n        }\n      }\n      this.activeRoutes(activePath)\n      return activePath\n    }\n  },\n  mounted() {\n    this.setVisibleNumber()\n  },\n  methods: {\n    // 根据宽度计算设置显示栏数\n    setVisibleNumber() {\n      const width = document.body.getBoundingClientRect().width - 200\n      const elWidth = this.$el.getBoundingClientRect().width\n      const menuItemNodes = this.$el.children\n      const menuWidth = Array.from(menuItemNodes).map(\n        (i) => i.getBoundingClientRect().width\n      )\n      this.visibleNumber = (\n        parseInt(width - elWidth) / parseInt(menuWidth)\n      ).toFixed(0)\n    },\n    // 菜单选择事件\n    handleSelect(key, keyPath) {\n      if (key.indexOf('http://') !== -1 || key.indexOf('https://') !== -1) {\n        // http(s):// 路径新窗口打开\n        window.open(key, '_blank')\n      } else {\n        this.activeRoutes(key)\n      }\n    },\n    // 当前激活的路由\n    activeRoutes(key) {\n      var routes = []\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\n        this.childrenMenus.map((item) => {\n          if (key === item.parentPath || (key === 'index' && item.path === '')) {\n            routes.push(item)\n          }\n        })\n      }\n      this.$store.commit('permission/SET_SIDEBAR_ROUTERS', routes)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-menu--horizontal > .el-menu-item {\n  float: left;\n  height: 50px;\n  line-height: 50px;\n  margin: 0;\n  border-bottom: 3px solid transparent;\n  color: #999093;\n  padding: 0 5px;\n  margin: 0 10px;\n}\n\n.el-menu--horizontal > .el-menu-item.is-active {\n  border-bottom: 3px solid #409eff;\n  color: #303133;\n}\n</style>\n"]}]}