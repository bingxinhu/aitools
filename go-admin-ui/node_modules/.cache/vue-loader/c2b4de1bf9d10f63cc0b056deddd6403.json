{"remainingRequest":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/views/admin/sys-login-log/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/views/admin/sys-login-log/index.vue","mtime":1669257735079},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1670489673015},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1670489672091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRlbFN5c0xvZ2lubG9nLCBnZXRTeXNMb2dpbmxvZywgbGlzdFN5c0xvZ2lubG9nIH0gZnJvbSAnQC9hcGkvYWRtaW4vc3lzLWxvZ2luLWxvZycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3lzTG9naW5Mb2dNYW5hZ2UnLAogIGNvbXBvbmVudHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpga7nvanlsYIKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g6YCJ5Lit5pWw57uECiAgICAgIGlkczogW10sCiAgICAgIC8vIOmdnuWNleS4quemgeeUqAogICAgICBzaW5nbGU6IHRydWUsCiAgICAgIC8vIOmdnuWkmuS4quemgeeUqAogICAgICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICcnLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIGZpbGVPcGVuOiBmYWxzZSwKICAgICAgZmlsZUluZGV4OiB1bmRlZmluZWQsCiAgICAgIC8vIOexu+Wei+aVsOaNruWtl+WFuAogICAgICB0eXBlT3B0aW9uczogW10sCiAgICAgIHN5c2xvZ2lubG9nTGlzdDogW10sCiAgICAgIHN0YXR1c09wdGlvbnM6IFtdLAogICAgICAvLyDlhbPns7vooajnsbvlnosKCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VJbmRleDogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgdXNlcm5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZCwKICAgICAgICBpcGFkZHI6IHVuZGVmaW5lZCwKICAgICAgICBsb2dpbkxvY2F0aW9uOiB1bmRlZmluZWQsCiAgICAgICAgY3JlYXRlZEF0T3JkZXI6ICdkZXNjJwogICAgICB9LAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybTogewogICAgICB9LAogICAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB0aGlzLmdldERpY3RzKCdzeXNfY29tbW9uX3N0YXR1cycpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLnN0YXR1c09wdGlvbnMgPSByZXNwb25zZS5kYXRhCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivouWPguaVsOWIl+ihqCAqLwogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBsaXN0U3lzTG9naW5sb2codGhpcy5hZGREYXRlUmFuZ2UodGhpcy5xdWVyeVBhcmFtcywgdGhpcy5kYXRlUmFuZ2UpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnN5c2xvZ2lubG9nTGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdAogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmNvdW50CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfQogICAgICApCiAgICB9LAogICAgLy8g5Y+W5raI5oyJ6ZKuCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlCiAgICAgIHRoaXMucmVzZXQoKQogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBJRDogdW5kZWZpbmVkLAogICAgICAgIHVzZXJuYW1lOiB1bmRlZmluZWQsCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsCiAgICAgICAgaXBhZGRyOiB1bmRlZmluZWQsCiAgICAgICAgbG9naW5Mb2NhdGlvbjogdW5kZWZpbmVkLAogICAgICAgIGJyb3dzZXI6IHVuZGVmaW5lZCwKICAgICAgICBvczogdW5kZWZpbmVkLAogICAgICAgIHBsYXRmb3JtOiB1bmRlZmluZWQsCiAgICAgICAgbG9naW5UaW1lOiB1bmRlZmluZWQsCiAgICAgICAgcmVtYXJrOiB1bmRlZmluZWQsCiAgICAgICAgbXNnOiB1bmRlZmluZWQKICAgICAgfQogICAgICB0aGlzLnJlc2V0Rm9ybSgnZm9ybScpCiAgICB9LAogICAgZ2V0SW1nTGlzdDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuZm9ybVt0aGlzLmZpbGVJbmRleF0gPSB0aGlzLiRyZWZzWydmaWxlQ2hvb3NlJ10ucmVzdWx0TGlzdFswXS5mdWxsVXJsCiAgICB9LAogICAgZmlsZUNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5maWxlT3BlbiA9IGZhbHNlCiAgICB9LAogICAgc3RhdHVzRm9ybWF0KHJvdykgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zdGF0dXNPcHRpb25zLCByb3cuc3RhdHVzKQogICAgfSwKICAgIC8vIOWFs+ezuwogICAgLy8g5paH5Lu2CiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlSW5kZXggPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXQogICAgICB0aGlzLnJlc2V0Rm9ybSgncXVlcnlGb3JtJykKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpCiAgICB9LAogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLnJlc2V0KCkKICAgICAgdGhpcy5vcGVuID0gdHJ1ZQogICAgICB0aGlzLnRpdGxlID0gJ+a3u+WKoOezu+e7n+eZu+W9leaXpeW/lycKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZQogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKQogICAgICB0aGlzLnNpbmdsZSA9IHNlbGVjdGlvbi5sZW5ndGggIT09IDEKICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoCiAgICB9LAogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlVXBkYXRlKHJvdykgewogICAgICB0aGlzLnJlc2V0KCkKICAgICAgY29uc3QgSUQgPQogICAgICAgICAgICAgICAgcm93LmlkIHx8IHRoaXMuaWRzCiAgICAgIGdldFN5c0xvZ2lubG9nKElEKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZQogICAgICAgIHRoaXMudGl0bGUgPSAn5L+u5pS557O757uf55m75b2V5pel5b+XJwogICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZQogICAgICB9KQogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdmFyIElkcyA9IChyb3cuaWQgJiYgW3Jvdy5pZF0pIHx8IHRoaXMuaWRzCgogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTliKDpmaTnvJblj7fkuLoiJyArIElkcyArICci55qE5pWw5o2u6aG5PycsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBkZWxTeXNMb2dpbmxvZyh7ICdpZHMnOiBJZHMgfSkKICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MocmVzcG9uc2UubXNnKQogICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/sys-login-log","sourcesContent":["\n<template>\n  <BasicLayout>\n    <template #wrapper>\n      <el-card class=\"box-card\">\n        <el-form ref=\"queryForm\" :model=\"queryParams\" :inline=\"true\" label-width=\"68px\">\n          <el-form-item label=\"用户名\" prop=\"username\"><el-input\n            v-model=\"queryParams.username\"\n            placeholder=\"请输入用户名\"\n            clearable\n            size=\"small\"\n            @keyup.enter.native=\"handleQuery\"\n          />\n          </el-form-item>\n          <el-form-item label=\"状态\" prop=\"status\"><el-select\n            v-model=\"queryParams.status\"\n            placeholder=\"系统登录日志状态\"\n            clearable\n            size=\"small\"\n          >\n            <el-option\n              v-for=\"dict in statusOptions\"\n              :key=\"dict.value\"\n              :label=\"dict.label\"\n              :value=\"dict.value\"\n            />\n          </el-select>\n          </el-form-item>\n          <el-form-item label=\"ip地址\" prop=\"ipaddr\"><el-input\n            v-model=\"queryParams.ipaddr\"\n            placeholder=\"请输入ip地址\"\n            clearable\n            size=\"small\"\n            @keyup.enter.native=\"handleQuery\"\n          />\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-row :gutter=\"10\" class=\"mb8\">\n          <el-col :span=\"1.5\">\n            <el-button\n              v-permisaction=\"['admin:sysLoginLog:remove']\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              :disabled=\"multiple\"\n              @click=\"handleDelete\"\n            >删除\n            </el-button>\n          </el-col>\n        </el-row>\n\n        <el-table v-loading=\"loading\" :data=\"sysloginlogList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n          <el-table-column\n            label=\"用户名\"\n            align=\"center\"\n            prop=\"username\"\n            :show-overflow-tooltip=\"true\"\n          />\n          <el-table-column\n            label=\"类型\"\n            align=\"center\"\n            prop=\"msg\"\n            :show-overflow-tooltip=\"true\"\n          />\n          <el-table-column\n            label=\"状态\"\n            align=\"center\"\n            prop=\"status\"\n            :formatter=\"statusFormat\"\n            width=\"100\"\n          >\n            <template slot-scope=\"scope\">\n              {{ statusFormat(scope.row) }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"ip地址\"\n            align=\"center\"\n            prop=\"ipaddr\"\n          >\n            <template slot-scope=\"scope\">\n              <el-popover trigger=\"hover\" placement=\"top\">\n                <p>IP: {{ scope.row.ipaddr }}</p>\n                <p>归属地: {{ scope.row.loginLocation }}</p>\n                <p>浏览器: {{ scope.row.browser }}</p>\n                <p>系统: {{ scope.row.os }}</p>\n                <p>固件: {{ scope.row.platform }}</p>\n                <div slot=\"reference\" class=\"name-wrapper\">\n                  {{ scope.row.ipaddr }}\n                </div>\n              </el-popover>\n            </template>\n          </el-table-column>\n\n          <el-table-column\n            label=\"登录时间\"\n            align=\"center\"\n            prop=\"loginTime\"\n            width=\"180\"\n          >\n            <template slot-scope=\"scope\">\n              <span>{{ parseTime(scope.row.loginTime) }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n            <template slot-scope=\"scope\">\n              <el-button\n                v-permisaction=\"['admin:sysLoginLog:remove']\"\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDelete(scope.row)\"\n              >删除\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageIndex\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-card>\n    </template>\n  </BasicLayout>\n</template>\n\n<script>\nimport { delSysLoginlog, getSysLoginlog, listSysLoginlog } from '@/api/admin/sys-login-log'\n\nexport default {\n  name: 'SysLoginLogManage',\n  components: {\n  },\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 总条数\n      total: 0,\n      // 弹出层标题\n      title: '',\n      // 是否显示弹出层\n      open: false,\n      isEdit: false,\n      fileOpen: false,\n      fileIndex: undefined,\n      // 类型数据字典\n      typeOptions: [],\n      sysloginlogList: [],\n      statusOptions: [],\n      // 关系表类型\n\n      // 查询参数\n      queryParams: {\n        pageIndex: 1,\n        pageSize: 10,\n        username: undefined,\n        status: undefined,\n        ipaddr: undefined,\n        loginLocation: undefined,\n        createdAtOrder: 'desc'\n      },\n      // 表单参数\n      form: {\n      },\n      // 表单校验\n      rules: {\n      }\n    }\n  },\n  created() {\n    this.getList()\n    this.getDicts('sys_common_status').then(response => {\n      this.statusOptions = response.data\n    })\n  },\n  methods: {\n    /** 查询参数列表 */\n    getList() {\n      this.loading = true\n      listSysLoginlog(this.addDateRange(this.queryParams, this.dateRange)).then(response => {\n        this.sysloginlogList = response.data.list\n        this.total = response.data.count\n        this.loading = false\n      }\n      )\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false\n      this.reset()\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        ID: undefined,\n        username: undefined,\n        status: undefined,\n        ipaddr: undefined,\n        loginLocation: undefined,\n        browser: undefined,\n        os: undefined,\n        platform: undefined,\n        loginTime: undefined,\n        remark: undefined,\n        msg: undefined\n      }\n      this.resetForm('form')\n    },\n    getImgList: function() {\n      this.form[this.fileIndex] = this.$refs['fileChoose'].resultList[0].fullUrl\n    },\n    fileClose: function() {\n      this.fileOpen = false\n    },\n    statusFormat(row) {\n      return this.selectDictLabel(this.statusOptions, row.status)\n    },\n    // 关系\n    // 文件\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageIndex = 1\n      this.getList()\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = []\n      this.resetForm('queryForm')\n      this.handleQuery()\n    },\n    /** 新增按钮操作 */\n    handleAdd() {\n      this.reset()\n      this.open = true\n      this.title = '添加系统登录日志'\n      this.isEdit = false\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id)\n      this.single = selection.length !== 1\n      this.multiple = !selection.length\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset()\n      const ID =\n                row.id || this.ids\n      getSysLoginlog(ID).then(response => {\n        this.form = response.data\n        this.open = true\n        this.title = '修改系统登录日志'\n        this.isEdit = true\n      })\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      var Ids = (row.id && [row.id]) || this.ids\n\n      this.$confirm('是否确认删除编号为\"' + Ids + '\"的数据项?', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function() {\n        return delSysLoginlog({ 'ids': Ids })\n      }).then((response) => {\n        if (response.code === 200) {\n          this.msgSuccess(response.msg)\n          this.open = false\n          this.getList()\n        } else {\n          this.msgError(response.msg)\n        }\n      }).catch(function() {})\n    }\n  }\n}\n</script>\n"]}]}