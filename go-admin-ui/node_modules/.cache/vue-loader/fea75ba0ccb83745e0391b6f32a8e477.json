{"remainingRequest":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/components/TopNav/index.vue?vue&type=style&index=0&id=35f3a2c1&lang=scss&scoped=true&","dependencies":[{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/src/components/TopNav/index.vue","mtime":1669257735071},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/css-loader/dist/cjs.js","mtime":1670489672355},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1670489672099},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/postcss-loader/src/index.js","mtime":1670489672211},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/sass-loader/dist/cjs.js","mtime":1670489674455},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1670489672947},{"path":"/home/cxhpc/workroot_lfs/goadmin/go-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1670489672091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtbWVudS0taG9yaXpvbnRhbCA+IC5lbC1tZW51LWl0ZW0gewogIGZsb2F0OiBsZWZ0OwogIGhlaWdodDogNTBweDsKICBsaW5lLWhlaWdodDogNTBweDsKICBtYXJnaW46IDA7CiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50OwogIGNvbG9yOiAjOTk5MDkzOwogIHBhZGRpbmc6IDAgNXB4OwogIG1hcmdpbjogMCAxMHB4Owp9CgouZWwtbWVudS0taG9yaXpvbnRhbCA+IC5lbC1tZW51LWl0ZW0uaXMtYWN0aXZlIHsKICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzQwOWVmZjsKICBjb2xvcjogIzMwMzEzMzsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/TopNav","sourcesContent":["<template>\n  <el-menu\n    :default-active=\"activeMenu\"\n    mode=\"horizontal\"\n    @select=\"handleSelect\"\n  >\n    <template v-for=\"(item, index) in topMenus\">\n      <el-menu-item\n        v-if=\"index < visibleNumber\"\n        :key=\"index\"\n        :index=\"item.path\"\n      ><svg-icon :icon-class=\"item.meta.icon\" />\n        {{ item.meta.title }}</el-menu-item>\n    </template>\n\n    <!-- 顶部菜单超出数量折叠 -->\n    <el-submenu v-if=\"topMenus.length > visibleNumber\" index=\"more\">\n      <template slot=\"title\">更多菜单</template>\n      <template v-for=\"(item, index) in topMenus\">\n        <el-menu-item\n          v-if=\"index >= visibleNumber\"\n          :key=\"index\"\n          :index=\"item.path\"\n        ><svg-icon :icon-class=\"item.meta.icon\" />\n          {{ item.meta.title }}</el-menu-item>\n      </template>\n    </el-submenu>\n  </el-menu>\n</template>\n\n<script>\nimport { constantRoutes } from '@/router'\n\nexport default {\n  data() {\n    return {\n      // 顶部栏初始数\n      visibleNumber: 5,\n      // 是否为首次加载\n      isFrist: false\n    }\n  },\n  computed: {\n    // 顶部显示菜单\n    topMenus() {\n      return this.routers.map((menu) => ({\n        ...menu,\n        children: undefined\n      }))\n    },\n    // 所有的路由信息\n    routers() {\n      return this.$store.state.permission.topbarRouters\n    },\n    // 设置子路由\n    childrenMenus() {\n      var childrenMenus = []\n      this.routers.map((router) => {\n        for (var item in router.children) {\n          if (router.children[item].parentPath === undefined) {\n            router.children[item].parentPath = router.path\n          }\n          childrenMenus.push(router.children[item])\n        }\n      })\n      return constantRoutes.concat(childrenMenus)\n    },\n    // 默认激活的菜单\n    activeMenu() {\n      const path = this.$route.path\n      let activePath = this.routers[0].path\n      if (path.lastIndexOf('/') > 0) {\n        const tmpPath = path.substring(1, path.length)\n        activePath = '/' + tmpPath.substring(0, tmpPath.indexOf('/'))\n      } else if (path === '/index' || path === '') {\n        if (!this.isFrist) {\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n          this.isFrist = true\n        } else {\n          activePath = 'index'\n        }\n      }\n      this.activeRoutes(activePath)\n      return activePath\n    }\n  },\n  mounted() {\n    this.setVisibleNumber()\n  },\n  methods: {\n    // 根据宽度计算设置显示栏数\n    setVisibleNumber() {\n      const width = document.body.getBoundingClientRect().width - 200\n      const elWidth = this.$el.getBoundingClientRect().width\n      const menuItemNodes = this.$el.children\n      const menuWidth = Array.from(menuItemNodes).map(\n        (i) => i.getBoundingClientRect().width\n      )\n      this.visibleNumber = (\n        parseInt(width - elWidth) / parseInt(menuWidth)\n      ).toFixed(0)\n    },\n    // 菜单选择事件\n    handleSelect(key, keyPath) {\n      if (key.indexOf('http://') !== -1 || key.indexOf('https://') !== -1) {\n        // http(s):// 路径新窗口打开\n        window.open(key, '_blank')\n      } else {\n        this.activeRoutes(key)\n      }\n    },\n    // 当前激活的路由\n    activeRoutes(key) {\n      var routes = []\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\n        this.childrenMenus.map((item) => {\n          if (key === item.parentPath || (key === 'index' && item.path === '')) {\n            routes.push(item)\n          }\n        })\n      }\n      this.$store.commit('permission/SET_SIDEBAR_ROUTERS', routes)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-menu--horizontal > .el-menu-item {\n  float: left;\n  height: 50px;\n  line-height: 50px;\n  margin: 0;\n  border-bottom: 3px solid transparent;\n  color: #999093;\n  padding: 0 5px;\n  margin: 0 10px;\n}\n\n.el-menu--horizontal > .el-menu-item.is-active {\n  border-bottom: 3px solid #409eff;\n  color: #303133;\n}\n</style>\n"]}]}